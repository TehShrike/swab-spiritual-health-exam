<!DOCTYPE html>
<html>
	<head>
		<title>Proverbs 3: Spiritual Health Exam</title>
		<script src="ractive-0.7.3.min.js"></script>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div>
			<div id="container">
				<h1>
					Proverbs 3:1-12, a spiritual health exam
				</h1>
				<h3>
					By Rodney Swab, accompanying his sermon on November 8, 2015
				</h3>
				<hr>

				<div id="exam">
				</div>
			</div>
		</div>

		<script id='body' type='text/html'>
			<h4>Do you treasure God's commands?</h4>
			<ol>
				<li>
					<question sectionNumber="0" questionNumber="0" yesScore="5" noScore="-1">
						Have you ever memorized a hefty portion of Scripture <em>(e.g. chapter or 7+ verses)</em>?
					</question>
				</li>
				<li>
					<question sectionNumber="0" questionNumber="1" yesScore="5" noScore="-1">
						In the past 3 years have you read <em>(or listened)</em> through the Bible?
					</question>
				</li>
				<li>
					<question sectionNumber="0" questionNumber="2" yesScore="3" noScore="-1">
						In the past 3 months have you studied, memorized, or meditated upon, a part of the Scripture?
					</question>
				</li>
				<li>
					<question sectionNumber="0" questionNumber="3" yesScore="3" noScore="-1">
						In the past month have you read the Bible at least once per week <em>(outside of church)</em>?
					</question>
				</li>
			</ol>

			<h4>Do you value truth and practice mercy?</h4>
			<ol>
				<li>
					<question sectionNumber="1" questionNumber="0" yesScore="-1" noScore="1">
						In the past 3 years when writing down your weight on a form have you lied?
					</question>
				</li>
				<li>
					<question sectionNumber="1" questionNumber="1" yesScore="-2" noScore="1">
						In the past year have you lied to someone to escape a difficult situation?
					</question>
				</li>
				<li>
					<question sectionNumber="1" questionNumber="2" yesScore="3" noScore="-1">
						In the past month have you experienced more merciful thoughts than vengeful ones?
					</question>
				</li>
				<li>
					<question sectionNumber="1" questionNumber="3" yesScore="3" noScore="-1">
						Do you regularly pray for a friend or loved one who is not walking with God?
					</question>
				</li>
			</ol>

			<h4>Do you openly trust and acknowledge God and His Word?</h4>
			<ol>
				<li>
					<question sectionNumber="2" questionNumber="0" yesScore="3" noScore="-1">
						In the past 3 years have you participated in at least 5 debates concerning God and the Bible?
					</question>
				</li>
				<li>
					<question sectionNumber="2" questionNumber="1" yesScore="3" noScore="-1">
						In the past year have you defended the Bible or God from attack by an unbeliever?
					</question>
				</li>
				<li>
					<question sectionNumber="2" questionNumber="2" yesScore="3" noScore="-1">
						In the past few months have you quoted Bible in conversation with a stranger or unbeliever?
					</question>
				</li>
				<li>
					<question sectionNumber="2" questionNumber="3" yesScore="3" noScore="-1">
						In the past month have you posted a Bible text or quote to social media?
					</question>
				</li>
			</ol>

			<h4>Do you regard your own wisdom as ultimate?</h4>
			<ol>
				<li>
					<question sectionNumber="3" questionNumber="0" yesScore="5" noScore="0">
						Have you ever changed a cultural view or practice based on bible study <em>(post conversion period)</em>?
					</question>
				</li>
				<li>
					<question sectionNumber="3" questionNumber="1" yesScore="5" noScore="0">
						In the past 2 years have you researched the Bible in an area of cultural dispute affecting you?
					</question>
				</li>
				<li>
					<question sectionNumber="3" questionNumber="2" yesScore="3" noScore="-1">
						Do you anchor possibly controversial personal beliefs or practices in biblical reasoning?
					</question>
				</li>
				<li>
					<question sectionNumber="3" questionNumber="3" yesScore="3" noScore="-1">
						If criticized do you typically defend yourself using biblical, as opposed to human, reason?
					</question>
				</li>
			</ol>

			<h4>Do you tithe consistently and share generously?</h4>
			<ol>
				<li>
					<question sectionNumber="4" questionNumber="0" yesScore="3" noScore="0">
						Have you ever tithed knowing you might run low on money before your next paycheck?
					</question>
				</li>
				<li>
					<question sectionNumber="4" questionNumber="1" yesScore="-2" noScore="2">
						In the past 3 years have you ever regretted giving a tithe or a gift?
					</question>
				</li>
				<li>
					<question sectionNumber="4" questionNumber="2" yesScore="5" noScore="-2">
						In the past year have you tithed 10% of your income regularly?
					</question>
				</li>
				<li>
					<question sectionNumber="4" questionNumber="3" yesScore="-2" noScore="2">
						Are you more than 6 weeks behind in tithing right now?
					</question>
				</li>
			</ol>

			<h4>Do you despise or detest God's correction?</h4>
			<ol>
				<li>
					<question sectionNumber="5" questionNumber="0" yesScore="3" noScore="-1">
						Have you ever sensed God's hand of correction upon you?
					</question>
				</li>
				<li>
					<question sectionNumber="5" questionNumber="1" yesScore="-1" noScore="2">
						If/when you sensed God's hand of correction upon you did you feel angry?
					</question>
				</li>
				<li>
					<question sectionNumber="5" questionNumber="2" yesScore="3" noScore="-1">
						If/when you sensed God's hand of correction upon you did you feel blessed?
					</question>
				</li>
				<li>
					<question sectionNumber="5" questionNumber="3" yesScore="3" noScore="-1">
						Are you pleased by the knowledge that God corrects those whom he loves?
					</question>
				</li>
			</ol>

			<hr>

			<p>
				Total: {{ total }} / 75
			</p>


		</script>

		<script id='question' type='text/html'>
			<div class="content">
				<p>{{>content}}</p>
			</div>
			<div class="response">
				<p>
					<label>
						<input
								type="radio"
								name="section-{{sectionNumber}}-question-{{questionNumber}}"
								value="yes"
								on-click="changeScore:{{sectionNumber}},{{questionNumber}},{{yesScore}}">
						Yes
					</label>
					<label>
						<input
								type="radio"
								name="section-{{sectionNumber}}-question-{{questionNumber}}"
								value="no"
								on-click="changeScore:{{sectionNumber}},{{questionNumber}},{{noScore}}">
						No
					</label>
				</p>
			</div>
		</script>
	</body>



	<script>
		var question = Ractive.extend({
			template: '#question'
		})

		new Ractive({
			el: '#exam',
			template: '#body',
			components: {
				question: question
			},
			data: {
				total: 0,
				sectionTotals: [0, 0, 0, 0, 0, 0],
				sections: [
					[0, 0, 0, 0],
					[0, 0, 0, 0],
					[0, 0, 0, 0],
					[0, 0, 0, 0],
					[0, 0, 0, 0],
					[0, 0, 0, 0]
				],
				sectionScore: function(sectionNumber) {
					console.log('checking', this.get('sections'), sectionNumber)
					return this.get('sections')[sectionNumber].reduce(function(total, num) {
						return total + num
					})
				}
			},
			oninit: function() {
				var r = this

				r.on('question.changeScore', function(event, sectionNumber, questionNumber, score) {
					console.log('changeScore:', sectionNumber, questionNumber, score)
					r.get('sections')[sectionNumber][questionNumber] = score

					updateSectionTotals()
					updateTotal()
				})

				function updateSectionTotals() {
					var newSectionTotals = r.get('sections').map(function(section) {
						return section.reduce(function(total, num) {
							return total + num
						})
					})

					r.set('sectionTotals', newSectionTotals)
				}

				function updateTotal() {
					var newTotal = r.get('sectionTotals').reduce(function(total, num) {
						return total + num
					})

					r.set('total', newTotal)
				}
			}
		})
	</script>
</html>
